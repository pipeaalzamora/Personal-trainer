(()=>{var e={};e.id=565,e.ids=[565],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},86093:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(56826),t(21727),t(35866);var a=t(23191),i=t(88716),o=t(37922),n=t.n(o),s=t(95231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);t.d(r,l);let c=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,56826)),"/home/pipeaalzamora/Documentos/Personal-trainer/app/cart/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,21727)),"/home/pipeaalzamora/Documentos/Personal-trainer/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/pipeaalzamora/Documentos/Personal-trainer/app/cart/page.tsx"],p="/cart/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93004:(e,r,t)=>{Promise.resolve().then(t.bind(t,27403))},27403:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(10326),i=t(17577),o=t(90772),n=t(33071),s=t(54432),l=t(94215),c=t(41922);function d(){let[e,r]=(0,i.useState)(""),[t,d]=(0,i.useState)(!1),{cart:p,removeFromCart:u}=(0,c.j)(),{toast:m}=(0,l.pm)(),x=p.reduce((e,r)=>e+r.price,0),h=async()=>{if(!e){m({title:"Email requerido",description:"Por favor, ingresa tu direcci\xf3n de correo electr\xf3nico.",variant:"destructive"});return}if(!e.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){m({title:"Email inv\xe1lido",description:"Por favor, ingresa una direcci\xf3n de correo electr\xf3nico v\xe1lida.",variant:"destructive"});return}if(0===p.length){m({title:"Carrito vac\xedo",description:"Tu carrito est\xe1 vac\xedo. Agrega alg\xfan curso antes de proceder al pago.",variant:"destructive"});return}d(!0);try{let r=await fetch("/api/transbank/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:x,email:e,cart:p})});if(!r.ok){let e=await r.json();console.error("Error al crear la transacci\xf3n:",e),m({title:"Error al procesar el pago",description:e.error||"Hubo un problema al procesar tu pago.",variant:"destructive"}),d(!1);return}let{url:t,token:a}=await r.json();localStorage.setItem("transbank_token",a),window.location.href=t}catch(e){console.error("Error inesperado:",e),m({title:"Error inesperado",description:"Hubo un error inesperado al procesar tu pago.",variant:"destructive"}),d(!1)}};return a.jsx("div",{className:"container mx-auto px-4 py-8 min-h-[60vh]",children:(0,a.jsxs)(n.Zb,{className:"max-w-2xl mx-auto mb-8",children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-2xl font-bold",children:"Carrito de Compras"})}),(0,a.jsxs)(n.aY,{children:[0===p.length?a.jsx("p",{children:"Tu carrito est\xe1 vac\xedo."}):(0,a.jsxs)(a.Fragment,{children:[p.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{children:e.title}),(0,a.jsxs)("span",{children:["$",e.price.toFixed(2)]}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>u(Number(e.id)),children:"Eliminar"})]},e.id)),a.jsx("div",{className:"border-t pt-4 mt-4",children:(0,a.jsxs)("p",{className:"font-bold text-lg",children:["Total: $",x.toFixed(2)]})})]}),a.jsx(s.I,{type:"email",placeholder:"Correo electr\xf3nico",value:e,onChange:e=>r(e.target.value),className:"mt-4"})]}),a.jsx(n.eW,{children:a.jsx(o.z,{onClick:h,disabled:t||!e||0===p.length,className:"w-full",children:t?"Procesando...":"Realizar Pago"})})]})})}},54432:(e,r,t)=>{"use strict";t.d(r,{I:()=>n});var a=t(10326),i=t(17577),o=t(77863);let n=i.forwardRef(({className:e,type:r,...t},i)=>a.jsx("input",{type:r,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));n.displayName="Input"},56826:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/home/pipeaalzamora/Documentos/Personal-trainer/app/cart/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,985,621,276,112],()=>t(86093));module.exports=a})();